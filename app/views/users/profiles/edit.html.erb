<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <%= stylesheet_link_tag 'profiles_edit', media: 'all', data: { turbolinks: false } %>

</head>
<body>
    <%= render 'users/navbar' %>

    <div class="container-fluid main-content px-4">
        <div class="row">
            <div class="col-lg-2 mb-4">
                <div class="sidebar">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a id="feedField" class="nav-link active" aria-current="page" href="#">Feeds</a></li>
                        <li class="nav-item"><a id="discoverField" class="nav-link" href="#">Discover</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-9 px-0 mb-0">
                <div class="main-workspace row row-cols-1 row-cols-md-2 row-cols-lg-2 px-0 mb-0">
                    <div class="col col-lg-12 d-flex flex-column">
                        <h2 class="fw-bold">Edit User Profile</h2>
                        <div class="card">
                            <%= form_with model: current_user, url: users_profile_path, method: :patch, local: true, html: { multipart: true } do |f| %>
                                <div class="avatar-upload-container text-center mb-4">
                                    <% if current_user.avatar.present? %> 
                                        <%= image_tag current_user.avatar.url, class: "profile-edit-avatar mb-3"%>
                                    <% else %>
                                        <%= image_tag 'plus_icon.png', alt: "User Avatar", class: "profile-edit-avatar mb-3" %>
                                    <% end %>   
                                    <label for="avatar-input" class="change-avatar-overlay" style="cursor: pointer;">
                                         <button type="button" class="btn btn-dark btn-sm position-relative overflow-hidden">
                                        CHANGE
                                        <%= f.file_field :avatar,
                                            accept: "image/*",
                                            class: "position-absolute top-0 start-0 w-100 h-100 opacity-0 cursor-pointer",
                                            id: "avatar-input" %>
                                        </button>
                                    </label>
                                </div>
                            
                                <div class="form-name mb-3">
                                    <h5 class="mb-3">Basic Information</h5>
                                </div>
                                <div class="input-field mb-3">
                                    <%= f.label :first_name, class:"form-label" %>
                                    <%= f.text_field :first_name, class: "form-control" %>
                                </div>
                                <div class="input-field mb-3">
                                    <%= f.label :last_name, class:"form-label" %>
                                    <%= f.text_field :last_name, class: "form-control" %>
                                </div>
                                <div class="input-field mb-3">
                                    <%= f.label :email, class:"form-label" %>
                                    <%= f.text_field :email, class: "form-control" %>
                                </div>
                                 <div class="actions save-button">
                                    <%= f.submit "Save", class: "btn btn-success" %>
                                </div>
                            <%end%>
                            
                            <hr class="my-4"> 
                            <%= render template: 'devise/passwords/edit' %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>